<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>mergescore · UniAdminTools.jl</title><meta name="title" content="mergescore · UniAdminTools.jl"/><meta property="og:title" content="mergescore · UniAdminTools.jl"/><meta property="twitter:title" content="mergescore · UniAdminTools.jl"/><meta name="description" content="Documentation for UniAdminTools.jl."/><meta property="og:description" content="Documentation for UniAdminTools.jl."/><meta property="twitter:description" content="Documentation for UniAdminTools.jl."/><meta property="og:url" content="https://MilesCranmer.github.io/UniAdminTools.jl/mergescore/"/><meta property="twitter:url" content="https://MilesCranmer.github.io/UniAdminTools.jl/mergescore/"/><link rel="canonical" href="https://MilesCranmer.github.io/UniAdminTools.jl/mergescore/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">UniAdminTools.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href><code>mergescore</code></a><ul class="internal"><li><a class="tocitem" href="#MCMC-Description"><span>MCMC Description</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href><code>mergescore</code></a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href><code>mergescore</code></a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/MilesCranmer/UniAdminTools.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/MilesCranmer/UniAdminTools.jl/blob/master/docs/src/mergescore.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Noise-model-for-combined-candidate-scoring"><a class="docs-heading-anchor" href="#Noise-model-for-combined-candidate-scoring">Noise model for combined candidate scoring</a><a id="Noise-model-for-combined-candidate-scoring-1"></a><a class="docs-heading-anchor-permalink" href="#Noise-model-for-combined-candidate-scoring" title="Permalink"></a></h1><p>Let&#39;s say we want to estimate a &quot;true score&quot; for a candidate in a competition, given noisy measurements from a random sample of reviewers who are not necessarily calibrated with each other. This is especially important in the low-data regime, so probably requires a Bayesian approach.</p><p>Let us make the assumption that candidates, indexed by <span>$i$</span>, have a true score of <span>$s_{i} \in \lbrack 1,10\rbrack$</span>.</p><p>Each reviewer, indexed by <span>$j$</span>, makes a noisy measurement <span>${\hat{s}}_{i,j}$</span> for candidates according to some the assignment matrix <span>$a_{i,j} = 1$</span> (and no measurement for <span>$a_{i,j} = 0$</span>)</p><p>Let us assume that this observation is described by a model with Gaussian noise:</p><p class="math-container">\[\begin{array}{r}
\varepsilon \sim \mathcal{N}(0,\sigma^{2}) \\
{\hat{s}}_{i,j} = b_{j}\left( s_{i} + \mu_{j} \right) + \varepsilon
\end{array}\]</p><p>for a global value of <span>$\sigma$</span>, and a per-reviewer <span>$\mu_{j},b_{j}$</span> parameter (a bias and scale term, respectively).</p><p>We are interested in the task of estimating <span>$s_{i}$</span> for all candidates, simultaneously, via the likelihood <span>$\Pr(\left\{ s_{i} \right\}_{i}~|~\left\{ {\hat{s}}_{i,j} \right\}_{i,j~|~a_{i,j} = 1})$</span> to do so, we wish to marginalize over the nuisance parameters <span>$\mu_{j},b_{j}$</span> and <span>$\sigma$</span>.</p><p class="math-container">\[\begin{aligned}
 &amp; \Pr(\left\{ s_{i} \right\}_{i}~|~\left\{ {\hat{s}}_{i,j} \right\}_{i,j|a_{i,j} = 1}) \\
 &amp; = \prod_{i}\Pr(s_{i}~|~\left\{ {\hat{s}}_{i,j} \right\}_{a_{i,j} = 1}) \\
 &amp; = \int_{\sigma}\Pr(\sigma)\prod_{i}\Pr(s_{i}~|~\left\{ {\hat{s}}_{i,j} \right\}_{a_{i,j} = 1},\sigma) \\
 &amp; \propto \int_{\sigma}\Pr(\sigma)\prod_{i}\Pr(\left\{ {\hat{s}}_{i,j} \right\}_{a_{i,j} = 1}~|~s_{i},\sigma)\Pr(s_{i}) \\
 &amp; = \int_{\sigma}\Pr(\sigma)\prod_{i}\Pr(s_{i})\left( \prod_{\begin{array}{r}
j \\
a_{i,j} = 1
\end{array}}\Pr({\hat{s}}_{i,j}~|~s_{i},\sigma) \right)
\end{aligned}\]</p><p>However, I tried computing this analytically and doing a simple approximation, but it doesn&#39;t seem like there&#39;s any good closed-form representation in the end suitable for an excel formula. So we need to turn to numerical methods (see next page):</p><h2 id="MCMC-Description"><a class="docs-heading-anchor" href="#MCMC-Description">MCMC Description</a><a id="MCMC-Description-1"></a><a class="docs-heading-anchor-permalink" href="#MCMC-Description" title="Permalink"></a></h2><p>We will instead run MCMC on this. We will set up this model in the probabilistic programming language Turing.jl. In summary, our priors are:</p><p class="math-container">\[\sigma \sim \mathcal{U}(0,2) \\
b_{j} \sim \mathcal{N}(1.0,0.3) \\
\mu_{j} \sim \mathcal{N}(0,1) \\
s_{i} \sim \mathcal{U}(1,10)\]</p><p>for each <span>$j$</span> and <span>$i$</span>. And our forward model is:</p><p class="math-container">\[{\hat{s}}_{i,j} \sim \mathcal{N}(b_{j}\left( s_{i} + \mu_{j} \right),\sigma),\text{ for all }i,j\text{ where }a_{i,j} = 1\]</p><p>In code form, this looks like:</p><pre><code class="language-julia hljs">using Turing: @model, Normal, Uniform, arraydist

@model function predict_scorings(s_ij)
    # Priors
    n_candidates = size(s_ij, 1)
    n_scorers = size(s_ij, 2)
    σ ~ Uniform(0, 2)
    b ~ arraydist([Normal(1.0, 0.3) for _ in 1:n_scorers])
    mu ~ arraydist([Normal(0, 1) for _ in 1:n_scorers])
    s ~ arraydist([Uniform(1, 10) for i in 1:n_candidates])
  
    # Model
    for i in 1:n_candidates, j in 1:n_scorers
        ismissing(s_ij[i, j]) &amp;&amp; continue
        s_ij[i, j] ~ Normal(b[j] * (s[i] + mu[j]), σ)
    end
end</code></pre><p>This is the exact same forward model we have described above.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Thursday 14 November 2024 13:08">Thursday 14 November 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
